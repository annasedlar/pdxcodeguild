<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Regular Expressions Extra Credit</title>
        <style type="text/css">

        /* styles go here */

        </style>
    </head>
    <body>

        <h1>Regular Expressions Extra Credit</h1>

        <script type="text/javascript">

        // pure functions FTW!
        function isSSN(input) {
            var isSSN = true;
            var regex = /^(\d{3})\-?(\d{2})\-?(\d{4})$/;
            var matches = input.match(regex);

            if (!matches) { // tests whether the entire string matched
                isSSN = false;
            }
            else if (matches[1] === '666') {
                isSSN = false;
            }
            else if (matches[1] > 899) {
                isSSN = false;
            }
            // do the most costly comparison last
            else {
                // start at 1 because thereâ€™s no need to test the full match
                for (var i = 1; i < matches.length; i += 1) {
                    if (/^0+$/.test(matches[i])) {
                        isSSN = false;
                        break;
                    }
                }
            }

            return isSSN;
        }

        function main() {
            var input = prompt('Enter a fake SSN (or [enter] to quit)');

            // user either entered an empty string or clicked cancel (input === null)
            if (!input) {
                return;
            }

            showResult(isSSN(input));
        }

        function showResult(isSSN) {
            var alertString = isSSN ? 'That looks like a SSN.' : 'That does not look like a SSN.';
            alert(alertString);
            main();
        }

        // prompt user for the first time
        main();

        </script>
    </body>
</html>
